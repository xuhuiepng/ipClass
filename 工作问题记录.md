# 工作问题记录

## 1. 批量查询信誉历史

​	优化方案（目前未启用）：将数据库中573万条ip数据在项目启动时配置到集合中

​	批量查询时，后台将读取的文件中ip与Set集合比对，这样避免了查询的ip在数据库中不存在造成对数据库的访问。111



优点：查询速度变快
缺点：项目启动速度变慢，占用一定内存

测试：

```
项目启动时间：1分钟左右

553.6w数据的Set对象内存：约573Mb

1.7w数据的查询时间：1分钟
```

## 2. GeoLite2

```java
com.maxmind.geoip2.exception.AddressNotFoundException: The address 127.0.0.1 is not in the database.
```

## 3. 文件上传后台没有做文件类型判断

## 4. ip单点查询，没有做ip格式匹配

## 5.IP库没有记录更新时间